{% extends "base.html" %}

{% block title %}Creative Vault | Tactics{% endblock %}

{% block content %}
<div x-data="{ sidebarToggle: false, darkMode: false, pageName: 'Creative Vault', isSidebarOpen: false }"
    :class="darkMode ? 'dark' : ''" class="flex h-screen overflow-hidden">
    <!-- Sidebar -->
    {% include 'partials/sidebar_app.html' %}

    <!-- Main Content Wrapper -->
    <div class="relative flex flex-1 flex-col overflow-y-auto overflow-x-hidden">
        <!-- Header -->
        {% include 'partials/header_app.html' %}

        <!-- Content Area -->
        <main class="flex-1 flex flex-col h-full relative">

            <!-- Previously Top Level Content (Adapted) -->
            <div class="relative flex flex-1 flex-col overflow-x-hidden h-full">
                <!-- Breadcrumb Start -->
                <div class="px-4 md:px-6 2xl:px-10 pt-4">
                    {% include "partials/aichat_breadcrumb.html" %}
                </div>
                <!-- Breadcrumb End -->

                <!-- Content Start -->
                <div class="relative flex-1 px-4 xl:flex xl:px-0 overflow-hidden">
                    <!-- Mobile Chat Header  -->
                    <div
                        class="my-6 flex items-center justify-between rounded-2xl border border-gray-200 bg-white p-3 xl:hidden dark:border-gray-800 dark:bg-gray-900">
                        <h4 class="pl-2 text-lg font-medium text-gray-800 dark:text-white/90">
                            History
                        </h4>
                        <button @click="isSidebarOpen = true"
                            class="inline-flex h-11 w-11 items-center justify-center rounded-lg border border-gray-300 text-gray-700 dark:border-gray-700 dark:text-gray-400">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none">
                                <path d="M4 6L20 6M4 18L20 18M4 12L20 12" stroke="currentColor" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </button>
                    </div>

                    <!-- Chat Area -->
                    <div class="flex-1 xl:py-10 overflow-y-auto custom-scrollbar pb-[100px]">
                        <div class="relative mx-auto flex max-w-[720px] flex-col">
                            <div class="space-y-7 pb-10 lg:pb-7">
                                <!-- User Message -->
                                <div class="flex justify-end">
                                    <div
                                        class="shadow-theme-xs bg-brand-100 dark:bg-brand-500/20 max-w-[480px] rounded-xl rounded-tr-xs px-4 py-3">
                                        <p class="text-left text-sm font-normal text-gray-800 dark:text-white/90">
                                            Generate 2 abstract image with purple and pink color for Instagram Story
                                        </p>
                                    </div>
                                </div>

                                <!-- AI Response -->
                                <div class="mb-6 flex justify-start">
                                    <div class="max-w-3xl">
                                        <div class="relative rounded-xl">
                                            <img src="/static/images/hero/hero-image-01.png"
                                                class="w-full rounded-xl object-cover h-[300px]"
                                                alt="Generated Image" />
                                        </div>
                                        <div class="mt-3">
                                            <button
                                                class="flex h-8 items-center gap-1 rounded-full border border-gray-100 bg-white px-3 py-1.5 text-xs font-medium text-gray-500 hover:text-gray-700 dark:border-gray-800 dark:bg-gray-900 dark:text-gray-400 dark:hover:text-gray-300">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                    viewBox="0 0 20 20" fill="none">
                                                    <path
                                                        d="M16.6671 13.3333V15.4166C16.6671 16.107 16.1074 16.6666 15.4171 16.6666H4.58301C3.89265 16.6666 3.33301 16.107 3.33301 15.4166V13.3333M10.0013 13.3333L10.0013 3.33331M6.14553 9.47948L9.99958 13.3311L13.8539 9.47948"
                                                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                                        stroke-linejoin="round" />
                                                </svg>
                                                Download
                                            </button>
                                            <p class="mt-3 text-sm leading-5 text-gray-500 dark:text-gray-400">
                                                Here is the abstract concept. The gradients match your brand identity.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div
                        class="fixed bottom-5 left-1/2 z-20 w-full -translate-x-1/2 transform px-4 sm:px-6 lg:bottom-10 lg:px-8 xl:left-[calc(50%+145px)]">
                        <div
                            class="mx-auto w-full max-w-[720px] rounded-2xl border border-gray-200 bg-white p-5 shadow-xs dark:border-gray-800 dark:bg-gray-800">
                            <textarea placeholder="Describe the creative asset you need..."
                                class="h-14 w-full resize-none border-none bg-transparent p-0 font-normal text-gray-800 outline-none placeholder:text-gray-400 focus:ring-0 dark:text-white"></textarea>
                            <div class="flex items-center justify-between pt-2">
                                <button
                                    class="flex items-center gap-1.5 text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none">
                                        <path
                                            d="M14.4194 11.7679L15.4506 10.7367C17.1591 9.02811 17.1591 6.25802 15.4506 4.54947C13.742 2.84093 10.9719 2.84093 9.2634 4.54947L8.2322 5.58067M11.77 14.4172L10.7365 15.4507C9.02799 17.1592 6.2579 17.1592 4.54935 15.4507C2.84081 13.7422 2.84081 10.9721 4.54935 9.26352L5.58285 8.23002M11.7677 8.23232L8.2322 11.7679"
                                            stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                    </svg>
                                    Reference Image
                                </button>
                                <button
                                    class="inline-flex h-9 w-9 items-center justify-center rounded-lg bg-gray-900 text-white transition hover:bg-gray-800 dark:bg-white/90 dark:text-gray-800 dark:hover:bg-gray-900 dark:hover:text-white/90">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none">
                                        <path d="M9.99674 3.33252L9.99675 16.667M5 8.32918L9.99984 3.33252L15 8.32918"
                                            stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- History Sidebar (Desktop) -->
                    <aside
                        class="hidden xl:flex z-50 w-[280px] flex-col border-l border-gray-200 bg-white p-6 ease-in-out dark:border-gray-800 dark:bg-gray-900 h-full">
                        <button
                            class="bg-brand-500 hover:bg-brand-600 flex w-full items-center justify-center gap-2 rounded-lg px-4 py-3 text-sm font-medium text-white transition">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"
                                fill="none">
                                <path d="M5 10.0002H15.0006M10.0002 5V15.0006" stroke="white" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            New Brief
                        </button>
                        <div class="mt-5 flex-1 overflow-y-auto">
                            <p class="mb-3 pl-3 text-xs text-gray-400 uppercase">Recent Briefs</p>
                            <ul class="space-y-1">
                                <li
                                    class="group relative rounded-full px-3 py-1.5 hover:bg-gray-50 dark:hover:bg-gray-950 cursor-pointer">
                                    <div class="flex items-center justify-between">
                                        <span class="block truncate text-sm text-gray-700 dark:text-gray-400">Summer
                                            Sale
                                            Banners</span>
                                    </div>
                                </li>
                                <li
                                    class="group relative rounded-full px-3 py-1.5 hover:bg-gray-50 dark:hover:bg-gray-950 cursor-pointer">
                                    <div class="flex items-center justify-between">
                                        <span class="block truncate text-sm text-gray-700 dark:text-gray-400">Black
                                            Friday Video
                                            Script</span>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </aside>

                    <!-- Sidebar Overlay (Mobile) -->
                    <div x-show="isSidebarOpen" @click="isSidebarOpen = false" x-transition.opacity
                        class="fixed inset-0 z-[99999] bg-black/50 xl:hidden dark:bg-black/80"></div>

                    <!-- Sidebar (Mobile) -->
                    <aside
                        :class="isSidebarOpen ? 'flex fixed top-0 right-0 z-[999999] h-screen bg-white dark:bg-gray-900' : 'hidden'"
                        class="z-50 w-[280px] flex-col border-l border-gray-200 p-6 ease-in-out dark:border-gray-800">
                        <!-- Same setup as desktop sidebar -->
                        <button
                            class="bg-brand-500 hover:bg-brand-600 flex w-full items-center justify-center gap-2 rounded-lg px-4 py-3 text-sm font-medium text-white transition">New
                            Brief</button>
                    </aside>

                </div>
            </div>
        </main>
    </div>
</div>
{% endblock %}
